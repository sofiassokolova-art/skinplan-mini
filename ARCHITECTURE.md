# –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ SkinIQ Mini App

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–±–∑–æ—Ä](#–æ–±–∑–æ—Ä)
2. [–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫](#—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π-—Å—Ç–µ–∫)
3. [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
4. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ-–ø–∞—Ç—Ç–µ—Ä–Ω—ã)
5. [–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö](#–±–∞–∑–∞-–¥–∞–Ω–Ω—ã—Ö)
6. [API –∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è](#api-–∏-–º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è)
7. [–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å](#–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è-–∏-–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
8. [–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram](#–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è-—Å-telegram)
9. [–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞](#–±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞)
10. [–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ](#—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ)

---

## üéØ –û–±–∑–æ—Ä

**SkinIQ Mini App** ‚Äî —ç—Ç–æ Telegram Mini App –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —É—Ö–æ–¥–∞ –∑–∞ –∫–æ–∂–µ–π. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –ø—Ä–æ–π—Ç–∏ –∞–Ω–∫–µ—Ç—É, –ø–æ–ª—É—á–∏—Ç—å –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω —É—Ö–æ–¥–∞ –Ω–∞ 28 –¥–Ω–µ–π –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –ø—Ä–æ–¥—É–∫—Ç–∞–º.

### –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –∞–Ω–∫–µ—Ç–∞ —Å 41 —ç–∫—Ä–∞–Ω–æ–º (–≤–æ–ø—Ä–æ—Å—ã, –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —ç–∫—Ä–∞–Ω—ã, testimonials)
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è –∫–æ–∂–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ—Ç–≤–µ—Ç–æ–≤
- 28-–¥–Ω–µ–≤–Ω—ã–π –ø–ª–∞–Ω —É—Ö–æ–¥–∞ —Å –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω—ã–º –≤–≤–µ–¥–µ–Ω–∏–µ–º –∞–∫—Ç–∏–≤–æ–≤
- –°–∏—Å—Ç–µ–º–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–∞–≤–∏–ª
- –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞–Ω–∫–µ—Ç–∞–º–∏, –ø—Ä–æ–¥—É–∫—Ç–∞–º–∏ –∏ –ø—Ä–∞–≤–∏–ª–∞–º–∏
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram Bot –¥–ª—è –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

---

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### Frontend
- **Next.js 16** (App Router) ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **React 19** ‚Äî UI –±–∏–±–ª–∏–æ—Ç–µ–∫–∞
- **TypeScript 5.8** ‚Äî —Ç–∏–ø–∏–∑–∞—Ü–∏—è
- **Chart.js + react-chartjs-2** ‚Äî –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö (–≥—Ä–∞—Ñ–∏–∫–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞)
- **Tailwind CSS** ‚Äî —Å—Ç–∏–ª–∏–∑–∞—Ü–∏—è (—á–∞—Å—Ç–∏—á–Ω–æ, –æ—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç–∏–ª–∏ inline)
- **CSS-in-JS (Inline Styles)** ‚Äî –ø—Ä–µ–æ–±–ª–∞–¥–∞—é—â–∏–π –ø–æ–¥—Ö–æ–¥ –∫ —Å—Ç–∏–ª–∏–∑–∞—Ü–∏–∏

### Backend
- **Next.js API Routes** ‚Äî REST API
- **Prisma ORM 6.19** ‚Äî —Ä–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- **PostgreSQL (Neon)** ‚Äî —Ä–µ–ª—è—Ü–∏–æ–Ω–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **JWT** ‚Äî —Ç–æ–∫–µ–Ω—ã –¥–ª—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- **Telegram Bot API** ‚Äî –±–æ—Ç –¥–ª—è –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- **Telegram WebApp API** ‚Äî –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Mini App
- **Vercel** ‚Äî —Ö–æ—Å—Ç–∏–Ω–≥ –∏ –¥–µ–ø–ª–æ–π

### –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- **tsx** ‚Äî –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ TypeScript —Å–∫—Ä–∏–ø—Ç–æ–≤
- **ESLint** ‚Äî –ª–∏–Ω—Ç–µ—Ä
- **Git** ‚Äî —Å–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ç—Ä–æ–ª—è –≤–µ—Ä—Å–∏–π

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
skinplan-mini/
‚îú‚îÄ‚îÄ app/                          # Next.js App Router
‚îÇ   ‚îú‚îÄ‚îÄ (miniapp)/               # –ì—Ä—É–ø–ø–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –¥–ª—è –º–∏–Ω–∏-–∞–ø–ø–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx           # Layout —Å BottomNavigation –∏ –ª–æ–≥–æ—Ç–∏–ø–æ–º
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ page.tsx             # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (—Ä—É—Ç–∏–Ω–∞ —É—Ö–æ–¥–∞)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ quiz/                # –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∞–Ω–∫–µ—Ç—ã
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ page.tsx         # –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∞–Ω–∫–µ—Ç—ã
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ info-screens.ts  # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã—Ö —ç–∫—Ä–∞–Ω–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ plan/                # –°—Ç—Ä–∞–Ω–∏—Ü–∞ 28-–¥–Ω–µ–≤–Ω–æ–≥–æ –ø–ª–∞–Ω–∞
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx         # –ü–ª–∞–Ω —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏ –∏ –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ profile/             # –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ—Ñ–∏–ª—è
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ insights/            # –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∏–Ω—Å–∞–π—Ç–æ–≤
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ page.tsx
‚îÇ   ‚îú‚îÄ‚îÄ admin/                   # –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx           # Layout –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ login/               # –°—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—Ö–æ–¥–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ page.tsx             # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∞–¥–º–∏–Ω–∫–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ products/            # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞–º–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ questionnaire/       # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–Ω–∫–µ—Ç–æ–π
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ rules/               # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª–∞–º–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ api/                     # API Routes
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth/                # –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ questionnaire/       # –ê–Ω–∫–µ—Ç–∞ (active, answers, progress)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ profile/             # –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ recommendations/     # –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø—Ä–æ–¥—É–∫—Ç–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ plan/                # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è 28-–¥–Ω–µ–≤–Ω–æ–≥–æ –ø–ª–∞–Ω–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ admin/               # API –¥–ª—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ telegram/            # Webhook –¥–ª—è Telegram –±–æ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx               # Root layout —Å Telegram WebApp script
‚îÇ   ‚îî‚îÄ‚îÄ globals.css              # –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏
‚îú‚îÄ‚îÄ lib/                         # –û–±—â–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∏ —É—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ api.ts                   # API –∫–ª–∏–µ–Ω—Ç (—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π request)
‚îÇ   ‚îú‚îÄ‚îÄ db.ts                    # Prisma Client (singleton)
‚îÇ   ‚îú‚îÄ‚îÄ telegram-client.ts       # –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è –ª–æ–≥–∏–∫–∞ Telegram WebApp
‚îÇ   ‚îú‚îÄ‚îÄ get-user-from-initdata.ts # –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ user –∏–∑ Telegram initData
‚îÇ   ‚îú‚îÄ‚îÄ profile-calculator.ts    # –õ–æ–≥–∏–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ –ø—Ä–æ—Ñ–∏–ª—è –∫–æ–∂–∏
‚îÇ   ‚îî‚îÄ‚îÄ validate-telegram-login.ts # –í–∞–ª–∏–¥–∞—Ü–∏—è Telegram Login Widget
‚îú‚îÄ‚îÄ components/                  # React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è)
‚îú‚îÄ‚îÄ prisma/
‚îÇ   ‚îî‚îÄ‚îÄ schema.prisma            # –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ scripts/                     # –°–∫—Ä–∏–ø—Ç—ã –¥–ª—è seed –∏ —É—Ç–∏–ª–∏—Ç
‚îÇ   ‚îú‚îÄ‚îÄ seed-all.ts              # –ì–ª–∞–≤–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ seed-questionnaire-v2.ts # –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∞–Ω–∫–µ—Ç—ã (41 —ç–∫—Ä–∞–Ω)
‚îÇ   ‚îú‚îÄ‚îÄ seed-products.ts         # –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ seed-rules.ts            # –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
‚îÇ   ‚îî‚îÄ‚îÄ setup-telegram-webhook.ts # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ webhook –¥–ª—è –±–æ—Ç–∞
‚îú‚îÄ‚îÄ middleware.ts                # Next.js middleware –¥–ª—è –∑–∞—â–∏—Ç—ã –º–∞—Ä—à—Ä—É—Ç–æ–≤
‚îú‚îÄ‚îÄ next.config.mjs              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Next.js
‚îú‚îÄ‚îÄ package.json                 # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ —Å–∫—Ä–∏–ø—Ç—ã
‚îî‚îÄ‚îÄ vercel.json                  # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Vercel
```

---

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã

### 1. **App Router (Next.js 13+)**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–æ–≤—ã–π App Router –≤–º–µ—Å—Ç–æ Pages Router
- Server Components –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- Client Components —Å –¥–∏—Ä–µ–∫—Ç–∏–≤–æ–π `'use client'` –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- –†–æ—É—Ç–∏–Ω–≥ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ñ–∞–π–ª–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

### 2. **API Routes (REST)**
- –í—Å–µ API endpoints –≤ `app/api/`
- –ö–∞–∂–¥—ã–π route —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç HTTP –º–µ—Ç–æ–¥—ã (`GET`, `POST`, etc.)
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `NextRequest` –∏ `NextResponse` –∏–∑ `next/server`

### 3. **–ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö (Prisma)**
- ORM –¥–ª—è —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å –ë–î
- –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–∏–ø–æ–≤ TypeScript
- –ú–∏–≥—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Prisma Migrate

### 4. **–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π API –∫–ª–∏–µ–Ω—Ç**
- –ï–¥–∏–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è `request()` –≤ `lib/api.ts`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ `initData` –≤ –∑–∞–≥–æ–ª–æ–≤–∫–∞—Ö
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –Ω–∞ —É—Ä–æ–≤–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞

### 5. **CSS-in-JS (Inline Styles)**
- –û—Å–Ω–æ–≤–Ω–æ–π –ø–æ–¥—Ö–æ–¥ ‚Äî inline —Å—Ç–∏–ª–∏ —á–µ—Ä–µ–∑ –æ–±—ä–µ–∫—Ç—ã
- –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞: –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Å—Ç–∏–ª–∏, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –∫–ª–∞—Å—Å–æ–≤
- –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏: –±–æ–ª—å—à–æ–π —Ä–∞–∑–º–µ—Ä –±–∞–Ω–¥–ª–∞ (—Ä–µ—à–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ React Server Components)

### 6. **–°—Ç—Ä–∞—Ç–µ–≥–∏—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏**
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏**: –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ Telegram `initData` (–±–µ–∑ —Å–µ—Å—Å–∏–π)
- **–ê–¥–º–∏–Ω—ã**: –ü—Ä–æ—Å—Ç–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ —Å–µ–∫—Ä–µ—Ç–Ω–æ–º—É —Å–ª–æ–≤—É (–º–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å –¥–æ JWT)

---

## üíæ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –°—Ö–µ–º–∞ (PostgreSQL —á–µ—Ä–µ–∑ Neon)

#### **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ –ø—Ä–æ—Ñ–∏–ª–∏**
```prisma
User              // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å Telegram
  ‚îú‚îÄ‚îÄ SkinProfile // –ü—Ä–æ—Ñ–∏–ª—å –∫–æ–∂–∏ (–≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π)
  ‚îú‚îÄ‚îÄ UserAnswer  // –û—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –∞–Ω–∫–µ—Ç—ã
  ‚îî‚îÄ‚îÄ RecommendationSession // –°–µ—Å—Å–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
```

#### **–ê–Ω–∫–µ—Ç–∞**
```prisma
Questionnaire     // –ê–Ω–∫–µ—Ç–∞ (–≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è)
  ‚îú‚îÄ‚îÄ QuestionGroup // –ì—Ä—É–ø–ø—ã –≤–æ–ø—Ä–æ—Å–æ–≤
  ‚îú‚îÄ‚îÄ Question      // –í–æ–ø—Ä–æ—Å—ã (single/multi choice, scale, text)
  ‚îÇ   ‚îî‚îÄ‚îÄ AnswerOption // –í–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤
  ‚îî‚îÄ‚îÄ UserAnswer    // –û—Ç–≤–µ—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
```

#### **–ö–∞—Ç–∞–ª–æ–≥ –ø—Ä–æ–¥—É–∫—Ç–æ–≤**
```prisma
Brand             // –ë—Ä–µ–Ω–¥—ã
  ‚îî‚îÄ‚îÄ Product     // –ü—Ä–æ–¥—É–∫—Ç—ã (—Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ –ø–æ —Ç–∏–ø—É –∫–æ–∂–∏, –ø—Ä–æ–±–ª–µ–º–∞–º)
```

#### **–ü—Ä–∞–≤–∏–ª–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π**
```prisma
RecommendationRule        // –ü—Ä–∞–≤–∏–ª–∞ (JSON —É—Å–ª–æ–≤–∏—è + —à–∞–≥–∏)
  ‚îî‚îÄ‚îÄ RecommendationSession // –°–µ—Å—Å–∏–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
```

#### **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã**
```prisma
Admin // –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã CMS
```

### –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
- **–í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ê–Ω–∫–µ—Ç—ã –∏ –ø—Ä–æ—Ñ–∏–ª–∏ –∏–º–µ—é—Ç –≤–µ—Ä—Å–∏–∏ –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
- **JSON –ø–æ–ª—è**: –ì–∏–±–∫–∏–µ –¥–∞–Ω–Ω—ã–µ (medicalMarkers, conditionsJson, stepsJson)
- **–ò–Ω–¥–µ–∫—Å—ã**: –ù–∞ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –ø–æ–ª—è—Ö (userId, questionnaireId, status)
- **Cascade deletes**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π

---

## üîå API –∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è

### –ü—É–±–ª–∏—á–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã (–±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)
- `/api/questionnaire/active` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ–π –∞–Ω–∫–µ—Ç—ã
- `/api/questionnaire/answers` ‚Äî –æ—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç `initData`)
- `/api/questionnaire/progress` ‚Äî —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ/–∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
- `/api/recommendations` ‚Äî —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø—Ä–æ–¥—É–∫—Ç–æ–≤
- `/api/plan/generate` ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è 28-–¥–Ω–µ–≤–Ω–æ–≥–æ –ø–ª–∞–Ω–∞
- `/api/profile/current` ‚Äî —Ç–µ–∫—É—â–∏–π –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `/api/telegram/webhook` ‚Äî webhook –¥–ª—è Telegram –±–æ—Ç–∞

### –ó–∞—â–∏—â–µ–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã (—Ç—Ä–µ–±—É—é—Ç JWT –∏–ª–∏ admin session)
- `/api/admin/*` ‚Äî –≤—Å–µ –∞–¥–º–∏–Ω—Å–∫–∏–µ endpoints
- Middleware –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–æ–∫–µ–Ω –∏–∑ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –∏–ª–∏ cookies

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ API –∫–ª–∏–µ–Ω—Ç–∞ (`lib/api.ts`)
```typescript
// –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è—é—Ç initData –≤ –∑–∞–≥–æ–ª–æ–≤–∫–∏
api.getActiveQuestionnaire()
api.submitAnswers(questionnaireId, answers)
api.getRecommendations()
api.getPlan()
api.getCurrentProfile()
```

---

## üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (Mini App)
1. **–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ Telegram `initData`**
   - `initData` –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ
   - –°–µ—Ä–≤–µ—Ä –∏–∑–≤–ª–µ–∫–∞–µ—Ç `user` —á–µ—Ä–µ–∑ `getUserIdFromInitData()`
   - –°–æ–∑–¥–∞–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
   - **–ù–µ—Ç —Å–µ—Å—Å–∏–π** ‚Äî –∫–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ `initData`

2. **–í–∞–ª–∏–¥–∞—Ü–∏—è `initData`**
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏ —á–µ—Ä–µ–∑ Telegram Bot Token
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è (–æ–±—ã—á–Ω–æ 24 —á–∞—Å–∞)
   - –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–¥–¥–µ–ª–∫–∏ –¥–∞–Ω–Ω—ã—Ö

### –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã (CMS)
1. **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ —Å–µ–∫—Ä–µ—Ç–Ω–æ–º—É —Å–ª–æ–≤—É**
   - –ü—Ä–æ—Å—Ç–∞—è —Ñ–æ—Ä–º–∞ —Å –ø–æ–ª–µ–º –ø–∞—Ä–æ–ª—è
   - –•—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è (`ADMIN_SECRET`)
   - –ú–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å –¥–æ JWT —Ç–æ–∫–µ–Ω–æ–≤

2. **Middleware –∑–∞—â–∏—Ç–∞**
   - `/api/admin/*` –∑–∞—â–∏—â–µ–Ω—ã middleware
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞ –∏–ª–∏ session cookie

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ SQL injection –∑–∞—â–∏—Ç–∞ (Prisma)
- ‚úÖ XSS –∑–∞—â–∏—Ç–∞ (React –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —ç–∫—Ä–∞–Ω–∏—Ä—É–µ—Ç)
- ‚úÖ CSRF –∑–∞—â–∏—Ç–∞ (Telegram initData —Å–æ–¥–µ—Ä–∂–∏—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π —Ö–µ—à)
- ‚úÖ Rate limiting (–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —á–µ—Ä–µ–∑ middleware)

---

## üì± –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram

### Telegram Mini App (WebApp API)

**–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è** (`lib/telegram-client.ts`):
```typescript
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤ layout.tsx
tg.ready()    // –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å WebApp
tg.expand()   // –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω
```

**–î–æ—Å—Ç—É–ø–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**:
- `window.Telegram.WebApp.initData` ‚Äî —Å—Ç—Ä–æ–∫–∞ –¥–ª—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- `window.Telegram.WebApp.initDataUnsafe.user` ‚Äî –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ, —Ç–æ–ª—å–∫–æ –¥–ª—è UI)

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ –≤ API**:
- –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∏–∑ `lib/api.ts` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è—é—Ç `X-Telegram-Init-Data` –≤ –∑–∞–≥–æ–ª–æ–≤–∫–∏
- –°–µ—Ä–≤–µ—Ä –∏–∑–≤–ª–µ–∫–∞–µ—Ç –∏ –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### Telegram Bot (Webhook)

**–ú–∞—Ä—à—Ä—É—Ç**: `/api/telegram/webhook`

**–û–±—Ä–∞–±–æ—Ç–∫–∞**:
- –ö–æ–º–∞–Ω–¥–∞ `/start` ‚Äî –æ—Ç–ø—Ä–∞–≤–∫–∞ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –∫–Ω–æ–ø–∫–æ–π Mini App
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Å–µ–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–æ–∫–µ–Ω–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞**:
```bash
npm run telegram:webhook
```

---

## üíº –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞

### 1. **–ü—Ä–æ—Ü–µ—Å—Å –∞–Ω–∫–µ—Ç—ã**

**–≠–∫—Ä–∞–Ω—ã** (41 —ç–∫—Ä–∞–Ω —Å–æ–≥–ª–∞—Å–Ω–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º):
- –ù–∞—á–∞–ª—å–Ω—ã–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —ç–∫—Ä–∞–Ω—ã (welcome, how it works, etc.)
- –í–æ–ø—Ä–æ—Å—ã (single/multi choice, slider, tinder)
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —ç–∫—Ä–∞–Ω—ã –º–µ–∂–¥—É –≤–æ–ø—Ä–æ—Å–∞–º–∏ (testimonials, comparisons)
- –§–∏–Ω–∞–ª—å–Ω—ã–µ —ç–∫—Ä–∞–Ω—ã (transformation, want improve)

**–ü—Ä–æ–≥—Ä–µ—Å—Å**:
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ `localStorage` (–æ—Ñ–ª–∞–π–Ω –¥–æ—Å—Ç—É–ø)
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º —á–µ—Ä–µ–∑ `/api/questionnaire/progress`
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∞–Ω–∫–µ—Ç—É —Å –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –º–µ—Å—Ç–∞

**–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ**:
- –û—Ç–ø—Ä–∞–≤–∫–∞ –≤—Å–µ—Ö –æ—Ç–≤–µ—Ç–æ–≤ —á–µ—Ä–µ–∑ `/api/questionnaire/answers`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç –ø—Ä–æ—Ñ–∏–ª—è –∫–æ–∂–∏
- –°–æ–∑–¥–∞–Ω–∏–µ RecommendationSession
- –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø–ª–∞–Ω–∞

### 2. **–†–∞—Å—á–µ—Ç –ø—Ä–æ—Ñ–∏–ª—è –∫–æ–∂–∏**

**–§–∞–π–ª**: `lib/profile-calculator.ts`

**–ü—Ä–æ—Ü–µ—Å—Å**:
1. –°–±–æ—Ä –≤—Å–µ—Ö –æ—Ç–≤–µ—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. –ü–∞—Ä—Å–∏–Ω–≥ `scoreJson` –∏–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –æ—Ç–≤–µ—Ç–æ–≤
3. –ê–≥—Ä–µ–≥–∞—Ü–∏—è –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º (oiliness, sensitivity, etc.)
4. –†–∞—Å—á–µ—Ç –∏—Ç–æ–≥–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
5. –°–æ–∑–¥–∞–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ `SkinProfile`

**–ü–æ–ª—è –ø—Ä–æ—Ñ–∏–ª—è**:
- `skinType` (dry/oily/combo/normal/sensitive)
- `sensitivityLevel` (low/medium/high)
- `dehydrationLevel` (0-5)
- `acneLevel` (0-5)
- `rosaceaRisk`, `pigmentationRisk`
- `ageGroup`
- `hasPregnancy`

### 3. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π**

**–ü—Ä–æ—Ü–µ—Å—Å**:
1. –ü–æ–∏—Å–∫ –ø–æ–¥—Ö–æ–¥—è—â–µ–≥–æ `RecommendationRule` –ø–æ —É—Å–ª–æ–≤–∏—è–º –ø—Ä–æ—Ñ–∏–ª—è
2. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –ø–æ:
   - –¢–∏–ø—É –∫–æ–∂–∏
   - –ü—Ä–æ–±–ª–µ–º–∞–º (concerns)
   - –ë—é–¥–∂–µ—Ç—É
   - –ò—Å–∫–ª—é—á–µ–Ω–Ω—ã–º –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–∞–º
   - –ë–µ—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç–∏ (–∏—Å–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ—Ç–∏–Ω–æ–ª–∞)
3. –°–æ–∑–¥–∞–Ω–∏–µ `RecommendationSession` —Å –º–∞—Å—Å–∏–≤–æ–º `productIds`

**–ü—Ä–∞–≤–∏–ª–∞** (`RecommendationRule`):
- JSON —É—Å–ª–æ–≤–∏—è: `conditionsJson` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `{ skinType: "oily", acneLevel: { gte: 3 } }`)
- JSON —à–∞–≥–∏: `stepsJson` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `{ cleanser: { category: ["cleanser"], max_items: 1 } }`)
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –¥–ª—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤

### 4. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è 28-–¥–Ω–µ–≤–Ω–æ–≥–æ –ø–ª–∞–Ω–∞**

**–§–∞–π–ª**: `app/api/plan/generate/route.ts`

**–ü—Ä–æ—Ü–µ—Å—Å**:
1. **–ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –ø—Ä–æ—Ñ–∏–ª—è** ‚Äî –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ñ–æ–∫—É—Å–∞ (acne, pores, dryness, etc.)
2. **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ–¥—É–∫—Ç–æ–≤**:
   - –ü–æ —Ç–∏–ø—É –∫–æ–∂–∏
   - –ü–æ –±—é–¥–∂–µ—Ç—É
   - –ò—Å–∫–ª—é—á–µ–Ω–∏–µ –∑–∞–ø—Ä–µ—â–µ–Ω–Ω—ã—Ö –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤
   - –ò—Å–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ—Ç–∏–Ω–æ–ª–∞ –ø—Ä–∏ –±–µ—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç–∏
3. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–ª–∞–Ω–∞**:
   - 4 –Ω–µ–¥–µ–ª–∏ √ó 7 –¥–Ω–µ–π = 28 –¥–Ω–µ–π
   - –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ –≤–≤–µ–¥–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–æ–≤ (–Ω–µ–¥–µ–ª—è 1: –±–∞–∑–æ–≤–æ–µ, –Ω–µ–¥–µ–ª—è 2+: –∞–∫—Ç–∏–≤—ã)
   - –£—Ç—Ä–µ–Ω–Ω–∏–π/–≤–µ—á–µ—Ä–Ω–∏–π —É—Ö–æ–¥ (SPF —Ç–æ–ª—å–∫–æ —É—Ç—Ä–æ–º)
4. **–ò–Ω—Ñ–æ–≥—Ä–∞—Ñ–∏–∫–∞**:
   - –ì—Ä–∞—Ñ–∏–∫ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ (Chart.js –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
   - –ú–µ—Ç—Ä–∏–∫–∏: acne, pores, hydration, pigmentation, wrinkles
   - –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–æ–±–ª–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–†–µ–∑—É–ª—å—Ç–∞—Ç**:
```typescript
{
  profile: { skinType, primaryFocus, concerns, ageGroup },
  weeks: [
    {
      week: 1,
      days: [{ day: 1, morning: [...], evening: [...], products: {...} }, ...]
    },
    ...
  ],
  infographic: {
    progress: [{ week: 1, acne: 25, ... }, ...],
    chartConfig: { type: "line", data: {...}, options: {...} }
  },
  products: [...],
  warnings: ["‚ö†Ô∏è –í–æ –≤—Ä–µ–º—è –±–µ—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç–∏ –∏—Å–∫–ª—é—á–µ–Ω—ã –ø—Ä–æ–¥—É–∫—Ç—ã —Å —Ä–µ—Ç–∏–Ω–æ–ª–æ–º"]
}
```

---

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞: Vercel

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** (`vercel.json`):
```json
{
  "framework": "nextjs",
  "buildCommand": "npm run build",
  "outputDirectory": ".next"
}
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ**:
- `DATABASE_URL` ‚Äî —Å—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL (Neon)
- `TELEGRAM_BOT_TOKEN` ‚Äî —Ç–æ–∫–µ–Ω Telegram –±–æ—Ç–∞
- `JWT_SECRET` ‚Äî —Å–µ–∫—Ä–µ—Ç –¥–ª—è JWT (–¥–ª—è –∞–¥–º–∏–Ω–∫–∏, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- `ADMIN_SECRET` ‚Äî —Å–µ–∫—Ä–µ—Ç–Ω–æ–µ —Å–ª–æ–≤–æ –¥–ª—è –≤—Ö–æ–¥–∞ –≤ –∞–¥–º–∏–Ω–∫—É
- `NEXT_PUBLIC_MINI_APP_URL` ‚Äî URL Mini App –¥–ª—è –∫–Ω–æ–ø–∫–∏ –≤ –±–æ—Ç–µ

**–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ**:
- `TELEGRAM_SECRET_TOKEN` ‚Äî —Å–µ–∫—Ä–µ—Ç–Ω—ã–π —Ç–æ–∫–µ–Ω –¥–ª—è webhook (–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)

### –ü—Ä–æ—Ü–µ—Å—Å –¥–µ–ø–ª–æ—è

1. **Push –≤ Git** ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π –Ω–∞ Vercel
2. **–ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î**:
   ```bash
   npm run db:push  # –î–ª—è development
   # –∏–ª–∏
   npm run db:migrate  # –î–ª—è production
   ```
3. **Seed –¥–∞–Ω–Ω—ã—Ö** (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ):
   ```bash
   npm run seed:all
   ```
4. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ webhook**:
   ```bash
   npm run telegram:webhook
   ```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

- **–õ–æ–≥–∏**: Vercel Dashboard ‚Üí Functions Logs
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: Neon Dashboard
- **Telegram Bot**: [@BotFather](https://t.me/BotFather) ‚Üí /mybots ‚Üí API status

---

## üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

1. **React Server Components**
   - –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
   - –ú–µ–Ω—å—à–µ JavaScript –≤ –±–∞–Ω–¥–ª–µ

2. **Prisma Connection Pooling**
   - Singleton Prisma Client
   - –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π

3. **API –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —á–µ—Ä–µ–∑ `NextResponse.json(..., { headers: { 'Cache-Control': '...' } })`

4. **Lazy Loading**
   - Chart.js –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø–ª–∞–Ω–∞

### –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

- ‚ö†Ô∏è –ë–æ–ª—å—à–æ–π —Ä–∞–∑–º–µ—Ä –±–∞–Ω–¥–ª–∞ –∏–∑-–∑–∞ inline —Å—Ç–∏–ª–µ–π (–º–æ–∂–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ CSS –º–æ–¥—É–ª–∏)
- ‚ö†Ô∏è –ù–µ—Ç rate limiting (–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —á–µ—Ä–µ–∑ middleware)
- ‚ö†Ô∏è –ù–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è API –æ—Ç–≤–µ—Ç–æ–≤ (–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å)

---

## üîÑ –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –∑–∞–ø—Ä–æ—Å–∞

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∑–∞–ø—Ä–æ—Å (Mini App)

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç Mini App —á–µ—Ä–µ–∑ Telegram
   ‚Üì
2. Telegram –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏ –ø–µ—Ä–µ–¥–∞–µ—Ç initData
   ‚Üì
3. React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–µ–ª–∞–µ—Ç –∑–∞–ø—Ä–æ—Å —á–µ—Ä–µ–∑ api.getRecommendations()
   ‚Üì
4. lib/api.ts –¥–æ–±–∞–≤–ª—è–µ—Ç initData –≤ –∑–∞–≥–æ–ª–æ–≤–æ–∫ X-Telegram-Init-Data
   ‚Üì
5. Next.js API Route –ø–æ–ª—É—á–∞–µ—Ç –∑–∞–ø—Ä–æ—Å
   ‚Üì
6. getUserIdFromInitData() –∏–∑–≤–ª–µ–∫–∞–µ—Ç –∏ –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   ‚Üì
7. Prisma –∑–∞–ø—Ä–æ—Å –∫ –ë–î
   ‚Üì
8. –í–æ–∑–≤—Ä–∞—Ç JSON –æ—Ç–≤–µ—Ç–∞
   ‚Üì
9. React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –æ–±–Ω–æ–≤–ª—è–µ—Ç UI
```

### –ê–¥–º–∏–Ω—Å–∫–∏–π –∑–∞–ø—Ä–æ—Å

```
1. –ê–¥–º–∏–Ω –≤–≤–æ–¥–∏—Ç —Å–µ–∫—Ä–µ—Ç–Ω–æ–µ —Å–ª–æ–≤–æ
   ‚Üì
2. POST /api/admin/login ‚Üí –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–æ–ª—è
   ‚Üì
3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ session cookie –∏–ª–∏ JWT —Ç–æ–∫–µ–Ω–∞
   ‚Üì
4. –ü–æ—Å–ª–µ–¥—É—é—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã ‚Üí middleware –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–æ–∫–µ–Ω
   ‚Üì
5. –î–æ—Å—Ç—É–ø –∫ –∑–∞—â–∏—â–µ–Ω–Ω—ã–º —Ä–µ—Å—É—Ä—Å–∞–º
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å

- ‚ùå –ù–µ—Ç unit —Ç–µ—Å—Ç–æ–≤
- ‚ùå –ù–µ—Ç integration —Ç–µ—Å—Ç–æ–≤
- ‚ùå –ù–µ—Ç E2E —Ç–µ—Å—Ç–æ–≤
- ‚úÖ –ï—Å—Ç—å debug —Å—Ç—Ä–∞–Ω–∏—Ü—ã (`/debug`, `/logs`)

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **Unit —Ç–µ—Å—Ç—ã**: Jest + React Testing Library –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
2. **API —Ç–µ—Å—Ç—ã**: Supertest –¥–ª—è API routes
3. **E2E —Ç–µ—Å—Ç—ã**: Playwright –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ flow –∞–Ω–∫–µ—Ç—ã

---

## üìù –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å—Ç–µ–∫ (Next.js 16, React 19, Prisma) –∏ —Å–ª–µ–¥—É–µ—Ç best practices:
- ‚úÖ –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (TypeScript + Prisma)
- ‚úÖ Server Components –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- ‚úÖ REST API —Å —á–µ—Ç–∫–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ Telegram
- ‚úÖ –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (–∞–Ω–∫–µ—Ç—ã, –ø—Ä–æ—Ñ–∏–ª–∏)

**–û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã**:
- –ë—ã—Å—Ç—Ä–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –±–ª–∞–≥–æ–¥–∞—Ä—è Next.js
- –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –Ω–∞ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω—è—Ö
- –õ–µ–≥–∫–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ (–º–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞)
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram –∏–∑ –∫–æ—Ä–æ–±–∫–∏

**–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è**:
- –î–æ–±–∞–≤–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ API –æ—Ç–≤–µ—Ç–æ–≤
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å rate limiting
- –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–º–µ—Ä –±–∞–Ω–¥–ª–∞ (CSS –º–æ–¥—É–ª–∏ –≤–º–µ—Å—Ç–æ inline —Å—Ç–∏–ª–µ–π)

---

**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞**: 1.0  
**–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**: 2025-01-27  
**–ê–≤—Ç–æ—Ä**: AI Assistant

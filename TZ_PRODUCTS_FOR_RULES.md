# –¢–ó: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –≤ –ø—Ä–∞–≤–∏–ª–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π

## –ü—Ä–æ–±–ª–µ–º–∞

–í —Ç–µ—Å—Ç–∞—Ö –ø—Ä–∞–≤–∏–ª (`npm run test:rules`) –≤–∏–¥–Ω–æ, —á—Ç–æ –¥–ª—è –º–Ω–æ–≥–∏—Ö –ø—Ä–∞–≤–∏–ª –ø–æ–¥–±–∏—Ä–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ 1 –ø—Ä–æ–¥—É–∫—Ç –Ω–∞ –∫–∞–∂–¥—ã–π —à–∞–≥. –≠—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ—Ç–æ–º—É, —á—Ç–æ:

1. **–í –ø—Ä–∞–≤–∏–ª–∞—Ö —É–∫–∞–∑–∞–Ω–æ `max_items: 1`** - —Å–∏—Å—Ç–µ–º–∞ –ø–æ–¥–±–∏—Ä–∞–µ—Ç —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –ø—Ä–æ–¥—É–∫—Ç –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞
2. **–í –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–æ–¥—É–∫—Ç–æ–≤** –¥–ª—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π —à–∞–≥–æ–≤
3. **–í –ø–ª–∞–Ω–µ –Ω–∞ 28 –¥–Ω–µ–π –Ω—É–∂–Ω—ã —Ä–∞–∑–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã** –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –¥–Ω–µ–π/—Ñ–∞–∑, —á—Ç–æ–±—ã –æ–±–µ—Å–ø–µ—á–∏—Ç—å —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ

## –¶–µ–ª—å

–î–æ–±–∞–≤–∏—Ç—å –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ —à–∞–≥–∞, —á—Ç–æ–±—ã:
- –ö–∞–∂–¥–æ–µ –ø—Ä–∞–≤–∏–ª–æ –º–æ–≥–ª–æ –ø–æ–¥–æ–±—Ä–∞—Ç—å –º–∏–Ω–∏–º—É–º 3-5 –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞
- –ü–ª–∞–Ω –Ω–∞ 28 –¥–Ω–µ–π –º–æ–≥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã –≤ —Ä–∞–∑–Ω—ã–µ –¥–Ω–∏
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥–ª–∏ –≤–∏–¥–µ—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã –ø—Ä–∏ –∑–∞–º–µ–Ω–µ –ø—Ä–æ–¥—É–∫—Ç–æ–≤

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —à–∞–≥–æ–≤ –≤ –ø—Ä–∞–≤–∏–ª–∞—Ö

–ü—Ä–∞–≤–∏–ª–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (–∏–∑ `stepsJson`):

### –ë–∞–∑–æ–≤—ã–µ —à–∞–≥–∏:
- `spf` - —Å–æ–ª–Ω—Ü–µ–∑–∞—â–∏—Ç–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞
- `cleanser` - –æ—á–∏—â–∞—é—â–∏–µ —Å—Ä–µ–¥—Å—Ç–≤–∞
- `toner` - —Ç–æ–Ω–∏–∫–∏/—ç—Å—Å–µ–Ω—Ü–∏–∏
- `serum` - —Å—ã–≤–æ—Ä–æ—Ç–∫–∏
- `treatment` - –ª–µ—á–µ–±–Ω—ã–µ/—Ç–∞—Ä–≥–µ—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞
- `moisturizer` - —É–≤–ª–∞–∂–Ω—è—é—â–∏–µ –∫—Ä–µ–º—ã
- `mask` - –º–∞—Å–∫–∏ (–µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ)

### –°–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (StepCategory):
- `cleanser_gentle` - –º—è–≥–∫–æ–µ –æ—á–∏—â–µ–Ω–∏–µ
- `cleanser_balancing` - –±–∞–ª–∞–Ω—Å–∏—Ä—É—é—â–µ–µ –æ—á–∏—â–µ–Ω–∏–µ
- `cleanser_deep` - –≥–ª—É–±–æ–∫–æ–µ –æ—á–∏—â–µ–Ω–∏–µ
- `toner_hydrating` - —É–≤–ª–∞–∂–Ω—è—é—â–∏–π —Ç–æ–Ω–∏–∫
- `toner_soothing` - —É—Å–ø–æ–∫–∞–∏–≤–∞—é—â–∏–π —Ç–æ–Ω–∏–∫
- `serum_niacinamide` - —Å—ã–≤–æ—Ä–æ—Ç–∫–∞ —Å –Ω–∏–∞—Ü–∏–Ω–∞–º–∏–¥–æ–º
- `serum_vitc` - —Å—ã–≤–æ—Ä–æ—Ç–∫–∞ —Å –≤–∏—Ç–∞–º–∏–Ω–æ–º C
- `serum_anti_redness` - —Å—ã–≤–æ—Ä–æ—Ç–∫–∞ –ø—Ä–æ—Ç–∏–≤ –ø–æ–∫—Ä–∞—Å–Ω–µ–Ω–∏–π
- `moisturizer_light` - –ª–µ–≥–∫–∏–π —É–≤–ª–∞–∂–Ω—è—é—â–∏–π –∫—Ä–µ–º
- `moisturizer_balancing` - –±–∞–ª–∞–Ω—Å–∏—Ä—É—é—â–∏–π –∫—Ä–µ–º
- `moisturizer_rich` - –Ω–∞—Å—ã—â–µ–Ω–Ω—ã–π –∫—Ä–µ–º
- `treatment_acne_bpo` - –ª–µ—á–µ–Ω–∏–µ –∞–∫–Ω–µ (–±–µ–Ω–∑–æ–∏–ª –ø–µ—Ä–æ–∫—Å–∏–¥)
- `treatment_acne_azelaic` - –ª–µ—á–µ–Ω–∏–µ –∞–∫–Ω–µ (–∞–∑–µ–ª–∞–∏–Ω–æ–≤–∞—è –∫–∏—Å–ª–æ—Ç–∞)
- `treatment_antiage` - –∞–Ω—Ç–∏–≤–æ–∑—Ä–∞—Å—Ç–Ω–æ–π —É—Ö–æ–¥
- `spf_50_face` - SPF 50 –¥–ª—è –ª–∏—Ü–∞

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –ø—Ä–æ–¥—É–∫—Ç–∞–º

### –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –Ω–∞ —à–∞–≥:
- **–ë–∞–∑–æ–≤—ã–µ —à–∞–≥–∏** (spf, cleanser, moisturizer): –º–∏–Ω–∏–º—É–º **5-7 –ø—Ä–æ–¥—É–∫—Ç–æ–≤**
- **–°–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏** (serum_niacinamide, treatment_acne_bpo –∏ —Ç.–¥.): –º–∏–Ω–∏–º—É–º **3-5 –ø—Ä–æ–¥—É–∫—Ç–æ–≤**
- **–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ —à–∞–≥–∏** (mask): –º–∏–Ω–∏–º—É–º **3-4 –ø—Ä–æ–¥—É–∫—Ç–∞**

### –ü–æ–∫—Ä—ã—Ç–∏–µ –ø–æ —Ç–∏–ø–∞–º –∫–æ–∂–∏:
–ö–∞–∂–¥—ã–π –ø—Ä–æ–¥—É–∫—Ç –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –ø–æ–ª–µ `skinTypes` —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö —Ç–∏–ø–æ–≤ –∫–æ–∂–∏:
- `dry` - —Å—É—Ö–∞—è
- `oily` - –∂–∏—Ä–Ω–∞—è
- `normal` - –Ω–æ—Ä–º–∞–ª—å–Ω–∞—è
- `combo` / `combination_dry` / `combination_oily` - –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è
- `sensitive` - —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–∞—è

### –ü–æ–∫—Ä—ã—Ç–∏–µ –ø–æ –ø—Ä–æ–±–ª–µ–º–∞–º (concerns):
–ö–∞–∂–¥—ã–π –ø—Ä–æ–¥—É–∫—Ç –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –ø–æ–ª–µ `concerns` —Å —É–∫–∞–∑–∞–Ω–∏–µ–º —Ä–µ—à–∞–µ–º—ã—Ö –ø—Ä–æ–±–ª–µ–º:
- `acne` - –∞–∫–Ω–µ
- `pigmentation` - –ø–∏–≥–º–µ–Ω—Ç–∞—Ü–∏—è
- `sensitivity` - —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- `dryness` - —Å—É—Ö–æ—Å—Ç—å
- `wrinkles` - –º–æ—Ä—â–∏–Ω—ã
- `redness` - –ø–æ–∫—Ä–∞—Å–Ω–µ–Ω–∏—è
- `pores` - –ø–æ—Ä—ã
- `oiliness` - –∂–∏—Ä–Ω–æ—Å—Ç—å

### –ü–æ–∫—Ä—ã—Ç–∏–µ –ø–æ –±—é–¥–∂–µ—Ç—É (priceSegment):
- `mass` - –±—é–¥–∂–µ—Ç–Ω—ã–π (–¥–æ 2000‚ÇΩ)
- `mid` - —Å—Ä–µ–¥–Ω–∏–π (2000-5000‚ÇΩ)
- `premium` - –ø—Ä–µ–º–∏—É–º (–æ—Ç 5000‚ÇΩ)

## –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—é –ø—Ä–æ–¥—É–∫—Ç–æ–≤

### 1. –≠–∫—Å–ø–æ—Ä—Ç –ø—Ä–∞–≤–∏–ª

```bash
# –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –≤—Å–µ –ø—Ä–∞–≤–∏–ª–∞ –≤ JSON
npm run export:rules > rules.json
```

–ò–ª–∏ —á–µ—Ä–µ–∑ Prisma Studio:
- –û—Ç–∫—Ä–æ–π—Ç–µ `RecommendationRule` —Ç–∞–±–ª–∏—Ü—É
- –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –≤—Å–µ –∑–∞–ø–∏—Å–∏ —Å `isActive: true`

### 2. –ê–Ω–∞–ª–∏–∑ –ø–æ–∫—Ä—ã—Ç–∏—è

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –∞–Ω–∞–ª–∏–∑–∞:
```bash
npm run analyze:products
```

–≠—Ç–æ –ø–æ–∫–∞–∂–µ—Ç:
- –ö–∞–∫–∏–µ —à–∞–≥–∏ –∏–º–µ—é—Ç –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–æ–¥—É–∫—Ç–æ–≤
- –ö–∞–∫–∏–µ —Ç–∏–ø—ã –∫–æ–∂–∏/–ø—Ä–æ–±–ª–µ–º—ã –Ω–µ –ø–æ–∫—Ä—ã—Ç—ã
- –ü—Ä–∏–º–µ—Ä—ã —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞

### 3. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –≤ –±–∞–∑—É

–î–ª—è –∫–∞–∂–¥–æ–≥–æ –Ω–µ–¥–æ—Å—Ç–∞—é—â–µ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–∞ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ:

#### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è:
- `name` - –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "Niacinamide 10% Serum")
- `brand` - —Å–≤—è–∑—å —Å –±—Ä–µ–Ω–¥–æ–º (—Å–æ–∑–¥–∞–π—Ç–µ –±—Ä–µ–Ω–¥, –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç)
- `step` - —à–∞–≥ —É—Ö–æ–¥–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "serum")
- `category` - –∫–∞—Ç–µ–≥–æ—Ä–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, "serum")
- `price` - —Ü–µ–Ω–∞ –≤ —Ä—É–±–ª—è—Ö
- `published` - `true`
- `brand.isActive` - `true`

#### –í–∞–∂–Ω—ã–µ –ø–æ–ª—è –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏:
- `skinTypes` - –º–∞—Å—Å–∏–≤ —Ç–∏–ø–æ–≤ –∫–æ–∂–∏: `["oily", "combo", "normal"]`
- `concerns` - –º–∞—Å—Å–∏–≤ –ø—Ä–æ–±–ª–µ–º: `["acne", "pores"]`
- `priceSegment` - —Å–µ–≥–º–µ–Ω—Ç —Ü–µ–Ω—ã: `"mass"` | `"mid"` | `"premium"`
- `isNonComedogenic` - –Ω–µ–∫–æ–º–µ–¥–æ–≥–µ–Ω–Ω—ã–π (–¥–ª—è –∞–∫–Ω–µ): `true` | `false`
- `isFragranceFree` - –±–µ–∑ –æ—Ç–¥—É—à–µ–∫ (–¥–ª—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–π –∫–æ–∂–∏): `true` | `false`

#### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è:
- `activeIngredients` - –∞–∫—Ç–∏–≤–Ω—ã–µ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã: `["niacinamide", "zinc"]`
- `composition` - –ø–æ–ª–Ω—ã–π —Å–æ—Å—Ç–∞–≤ (—Ç–µ–∫—Å—Ç)
- `imageUrl` - —Å—Å—ã–ª–∫–∞ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
- `description` - –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞
- `descriptionUser` - –æ–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `isHero` - –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–π –ø—Ä–æ–¥—É–∫—Ç: `true` | `false`
- `priority` - –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (—á–∏—Å–ª–æ, —á–µ–º –≤—ã—à–µ, —Ç–µ–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–µ–µ)

### 4. –ú–∞–ø–ø–∏–Ω–≥ —à–∞–≥–æ–≤ –ø—Ä–∞–≤–∏–ª –Ω–∞ StepCategory

–ü—Ä–∞–≤–∏–ª–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø—Ä–æ—Å—Ç—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è —à–∞–≥–æ–≤ (`spf`, `serum`, `cleanser`), –Ω–æ —Å–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ –Ω–∞—Ö–æ–¥–∏—Ç—å –ø—Ä–æ–¥—É–∫—Ç—ã –ø–æ `StepCategory`.

**–ú–∞–ø–ø–∏–Ω–≥:**
- `spf` ‚Üí –∏—â–µ—Ç –ø—Ä–æ–¥—É–∫—Ç—ã —Å `step: "spf"` –∏–ª–∏ `category: "spf"`
- `serum` ‚Üí –∏—â–µ—Ç –ø—Ä–æ–¥—É–∫—Ç—ã —Å `step: "serum"` –∏–ª–∏ `category: "serum"`
- `cleanser` ‚Üí –∏—â–µ—Ç –ø—Ä–æ–¥—É–∫—Ç—ã —Å `step: "cleanser"` –∏–ª–∏ `category: "cleanser"`
- `moisturizer` / `cream` ‚Üí –∏—â–µ—Ç –ø—Ä–æ–¥—É–∫—Ç—ã —Å `step: "moisturizer"` –∏–ª–∏ `category: "moisturizer"`

**–í–∞–∂–Ω–æ:** –ï—Å–ª–∏ –ø—Ä–∞–≤–∏–ª–æ —É–∫–∞–∑—ã–≤–∞–µ—Ç `category: ["cream"]`, —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –º–∞–ø–ø–∏—Ç –Ω–∞ `["moisturizer"]`.

### 5. –ü—Ä–∏–º–µ—Ä—ã –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è

#### SPF (–º–∏–Ω–∏–º—É–º 5-7 –ø—Ä–æ–¥—É–∫—Ç–æ–≤):
```
1. SPF 50 –¥–ª—è –∂–∏—Ä–Ω–æ–π –∫–æ–∂–∏ (oil-free, –º–∞—Ç–∏—Ä—É—é—â–∏–π)
2. SPF 50 –¥–ª—è —Å—É—Ö–æ–π –∫–æ–∂–∏ (—É–≤–ª–∞–∂–Ω—è—é—â–∏–π)
3. SPF 50 –¥–ª—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–π –∫–æ–∂–∏ (–º–∏–Ω–µ—Ä–∞–ª—å–Ω—ã–π)
4. SPF 50 —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π
5. SPF 50 —Å —Ç–æ–Ω–∏—Ä—É—é—â–∏–º —ç—Ñ—Ñ–µ–∫—Ç–æ–º
6. SPF 50 –±—é–¥–∂–µ—Ç–Ω—ã–π
7. SPF 50 –ø—Ä–µ–º–∏—É–º
```

#### Cleanser (–º–∏–Ω–∏–º—É–º 5-7 –ø—Ä–æ–¥—É–∫—Ç–æ–≤):
```
1. –ú—è–≥–∫–æ–µ –æ—á–∏—â–µ–Ω–∏–µ –¥–ª—è —Å—É—Ö–æ–π –∫–æ–∂–∏
2. –ë–∞–ª–∞–Ω—Å–∏—Ä—É—é—â–µ–µ –æ—á–∏—â–µ–Ω–∏–µ –¥–ª—è –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∫–æ–∂–∏
3. –ì–ª—É–±–æ–∫–æ–µ –æ—á–∏—â–µ–Ω–∏–µ –¥–ª—è –∂–∏—Ä–Ω–æ–π –∫–æ–∂–∏
4. –û—á–∏—â–µ–Ω–∏–µ —Å –∫–∏—Å–ª–æ—Ç–∞–º–∏ (–¥–ª—è –∞–∫–Ω–µ)
5. –û—á–∏—â–µ–Ω–∏–µ –¥–ª—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–π –∫–æ–∂–∏
6. –û—á–∏—â–µ–Ω–∏–µ –±—é–¥–∂–µ—Ç–Ω–æ–µ
7. –û—á–∏—â–µ–Ω–∏–µ –ø—Ä–µ–º–∏—É–º
```

#### Serum (–º–∏–Ω–∏–º—É–º 3-5 –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –Ω–∞ –∫–∞–∂–¥—ã–π —Ç–∏–ø):
```
serum_niacinamide:
1. Niacinamide 10% –¥–ª—è –∂–∏—Ä–Ω–æ–π –∫–æ–∂–∏
2. Niacinamide 5% –¥–ª—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–π –∫–æ–∂–∏
3. Niacinamide + Zinc –¥–ª—è –∞–∫–Ω–µ
4. Niacinamide –±—é–¥–∂–µ—Ç–Ω—ã–π
5. Niacinamide –ø—Ä–µ–º–∏—É–º

serum_vitc:
1. Vitamin C 20% –¥–ª—è –ø–∏–≥–º–µ–Ω—Ç–∞—Ü–∏–∏
2. Vitamin C 10% –¥–ª—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–π –∫–æ–∂–∏
3. Vitamin C + E –∞–Ω—Ç–∏–æ–∫—Å–∏–¥–∞–Ω—Ç
4. Vitamin C –±—é–¥–∂–µ—Ç–Ω—ã–π
5. Vitamin C –ø—Ä–µ–º–∏—É–º
```

#### Treatment (–º–∏–Ω–∏–º—É–º 3-5 –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –Ω–∞ –∫–∞–∂–¥—ã–π —Ç–∏–ø):
```
treatment_acne_bpo:
1. Benzoyl Peroxide 2.5% –¥–ª—è –ª–µ–≥–∫–æ–≥–æ –∞–∫–Ω–µ
2. Benzoyl Peroxide 5% –¥–ª—è —Å—Ä–µ–¥–Ω–µ–≥–æ –∞–∫–Ω–µ
3. Benzoyl Peroxide –≥–µ–ª—å
4. Benzoyl Peroxide –∫—Ä–µ–º

treatment_acne_azelaic:
1. Azelaic Acid 15% –≥–µ–ª—å
2. Azelaic Acid 10% –∫—Ä–µ–º
3. Azelaic Acid –¥–ª—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–π –∫–æ–∂–∏
```

#### Moisturizer (–º–∏–Ω–∏–º—É–º 5-7 –ø—Ä–æ–¥—É–∫—Ç–æ–≤):
```
1. –õ–µ–≥–∫–∏–π –∫—Ä–µ–º –¥–ª—è –∂–∏—Ä–Ω–æ–π –∫–æ–∂–∏ (oil-free)
2. –ë–∞–ª–∞–Ω—Å–∏—Ä—É—é—â–∏–π –∫—Ä–µ–º –¥–ª—è –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∫–æ–∂–∏
3. –ù–∞—Å—ã—â–µ–Ω–Ω—ã–π –∫—Ä–µ–º –¥–ª—è —Å—É—Ö–æ–π –∫–æ–∂–∏
4. –ö—Ä–µ–º –¥–ª—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–π –∫–æ–∂–∏
5. –ö—Ä–µ–º —Å –±–∞—Ä—å–µ—Ä–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–µ–π
6. –ö—Ä–µ–º –±—é–¥–∂–µ—Ç–Ω—ã–π
7. –ö—Ä–µ–º –ø—Ä–µ–º–∏—É–º
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ–¥—É–∫—Ç–æ–≤:
```bash
npm run analyze:products
```

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ:
- ‚úÖ –î–ª—è –∫–∞–∂–¥–æ–≥–æ –±–∞–∑–æ–≤–æ–≥–æ —à–∞–≥–∞ –º–∏–Ω–∏–º—É–º 5 –ø—Ä–æ–¥—É–∫—Ç–æ–≤
- ‚úÖ –î–ª—è –∫–∞–∂–¥–æ–π —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –º–∏–Ω–∏–º—É–º 3 –ø—Ä–æ–¥—É–∫—Ç–∞
- ‚úÖ –ù–µ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Å 0 –ø—Ä–æ–¥—É–∫—Ç–∞–º–∏

2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã –ø—Ä–∞–≤–∏–ª:
```bash
npm run test:rules
```

–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
- ‚úÖ –í—Å–µ –ø—Ä–∞–≤–∏–ª–∞ –ø—Ä–æ—Ö–æ–¥—è—Ç (–Ω–∞–π–¥–µ–Ω–æ –º–∏–Ω–∏–º—É–º 1 –ø—Ä–æ–¥—É–∫—Ç –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞)
- ‚úÖ –î–ª—è –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞ –Ω–∞–π–¥–µ–Ω–æ –º–∏–Ω–∏–º—É–º 3 –ø—Ä–æ–¥—É–∫—Ç–∞ (–µ—Å–ª–∏ `max_items >= 3`)

3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–ª–∞–Ω:
- –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π –ø—Ä–æ—Ñ–∏–ª—å —á–µ—Ä–µ–∑ –∞–Ω–∫–µ—Ç—É
- –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –ø–ª–∞–Ω –Ω–∞ 28 –¥–Ω–µ–π
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ –ø–ª–∞–Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ä–∞–∑–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã –≤ —Ä–∞–∑–Ω—ã–µ –¥–Ω–∏
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã –¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è –∑–∞–º–µ–Ω—ã (–∫–Ω–æ–ø–∫–∞ "–ó–∞–º–µ–Ω–∏—Ç—å –ø—Ä–æ–¥—É–∫—Ç")

## –ö–∞–∫ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ Prisma Studio
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `npm run db:studio`
2. –û—Ç–∫—Ä–æ–π—Ç–µ —Ç–∞–±–ª–∏—Ü—É `RecommendationRule`
3. –û—Ç—Ñ–∏–ª—å—Ç—Ä—É–π—Ç–µ `isActive: true`
4. –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –≤ JSON –∏–ª–∏ CSV

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ SQL –∑–∞–ø—Ä–æ—Å
```sql
SELECT id, name, conditionsJson, stepsJson, priority, isActive 
FROM recommendation_rules 
WHERE isActive = true 
ORDER BY priority DESC;
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ß–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç (–º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å)
```typescript
// scripts/export-rules.ts
import { PrismaClient } from '@prisma/client';
import { writeFileSync } from 'fs';

const prisma = new PrismaClient();

async function exportRules() {
  const rules = await prisma.recommendationRule.findMany({
    where: { isActive: true },
    orderBy: { priority: 'desc' },
  });
  
  writeFileSync('rules-export.json', JSON.stringify(rules, null, 2));
  console.log(`–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ ${rules.length} –ø—Ä–∞–≤–∏–ª –≤ rules-export.json`);
  await prisma.$disconnect();
}

exportRules();
```

## –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –¥–æ–±–∞–≤–ª–µ–Ω–∏—è

### üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–¥–æ–±–∞–≤–∏—Ç—å —Å—Ä–æ—á–Ω–æ):
1. **moisturizer_rich** - **0 –ø—Ä–æ–¥—É–∫—Ç–æ–≤** ‚ùå ‚Üí –Ω—É–∂–Ω–æ –º–∏–Ω–∏–º—É–º **3-5 –ø—Ä–æ–¥—É–∫—Ç–æ–≤**
2. **mask_sleeping** - **1 –ø—Ä–æ–¥—É–∫—Ç** ‚ùå ‚Üí –Ω—É–∂–Ω–æ –º–∏–Ω–∏–º—É–º **2-3 –ø—Ä–æ–¥—É–∫—Ç–∞**
3. **mask_soothing** - **1 –ø—Ä–æ–¥—É–∫—Ç** ‚ùå ‚Üí –Ω—É–∂–Ω–æ –º–∏–Ω–∏–º—É–º **2-3 –ø—Ä–æ–¥—É–∫—Ç–∞**

### üü† –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–¥–æ–±–∞–≤–∏—Ç—å –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å):
4. **SPF (spf_50_face/oily/sensitive)** - —Å–µ–π—á–∞—Å –ø–æ 3 –ø—Ä–æ–¥—É–∫—Ç–∞ ‚Üí –Ω—É–∂–Ω–æ –º–∏–Ω–∏–º—É–º **5-7 –ø—Ä–æ–¥—É–∫—Ç–æ–≤** –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞
5. **Moisturizer (light/balancing/soothing)** - —Å–µ–π—á–∞—Å –ø–æ 3 –ø—Ä–æ–¥—É–∫—Ç–∞ ‚Üí –Ω—É–∂–Ω–æ –º–∏–Ω–∏–º—É–º **5 –ø—Ä–æ–¥—É–∫—Ç–æ–≤** –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞
6. **Serum (vitc)** - —Å–µ–π—á–∞—Å 3 –ø—Ä–æ–¥—É–∫—Ç–∞ ‚Üí –Ω—É–∂–Ω–æ –º–∏–Ω–∏–º—É–º **5 –ø—Ä–æ–¥—É–∫—Ç–æ–≤**
7. **Treatment (acne_bpo, acne_azelaic)** - —Å–µ–π—á–∞—Å –ø–æ 3 –ø—Ä–æ–¥—É–∫—Ç–∞ ‚Üí –Ω—É–∂–Ω–æ –º–∏–Ω–∏–º—É–º **5 –ø—Ä–æ–¥—É–∫—Ç–æ–≤** –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞

### üü° –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
8. **Serum (niacinamide, anti_redness)** - —Å–µ–π—á–∞—Å 4-5 –ø—Ä–æ–¥—É–∫—Ç–æ–≤ ‚Üí –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –µ—â–µ **2-3 –ø—Ä–æ–¥—É–∫—Ç–∞** –¥–ª—è —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏—è
9. **Toner (hydrating, soothing)** - —Å–µ–π—á–∞—Å 4-5 –ø—Ä–æ–¥—É–∫—Ç–æ–≤ ‚Üí –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –µ—â–µ **2-3 –ø—Ä–æ–¥—É–∫—Ç–∞**
10. **Treatment (antiage, pigmentation)** - —Å–µ–π—á–∞—Å 3 –ø—Ä–æ–¥—É–∫—Ç–∞ ‚Üí –Ω—É–∂–Ω–æ –º–∏–Ω–∏–º—É–º **5 –ø—Ä–æ–¥—É–∫—Ç–æ–≤** –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞

### üü¢ –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
11. **Mask (clay, hydrating)** - —Å–µ–π—á–∞—Å 2-3 –ø—Ä–æ–¥—É–∫—Ç–∞ ‚Üí –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –µ—â–µ **1-2 –ø—Ä–æ–¥—É–∫—Ç–∞**
12. **Eye cream** - —Å–µ–π—á–∞—Å 6 –ø—Ä–æ–¥—É–∫—Ç–æ–≤ ‚úÖ (–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ)
13. **Spot treatment** - —Å–µ–π—á–∞—Å 3 –ø—Ä–æ–¥—É–∫—Ç–∞ ‚Üí –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –µ—â–µ **1-2 –ø—Ä–æ–¥—É–∫—Ç–∞**
14. **Lip care** - —Å–µ–π—á–∞—Å 2 –ø—Ä–æ–¥—É–∫—Ç–∞ ‚Üí –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –µ—â–µ **1-2 –ø—Ä–æ–¥—É–∫—Ç–∞**

## –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞

–ï—Å–ª–∏ –≤—ã –¥–æ–±–∞–≤–ª—è–µ—Ç–µ –ø—Ä–æ–¥—É–∫—Ç—ã —á–µ—Ä–µ–∑ CSV/JSON, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–ª–µ–¥—É—é—â–∏–π —Ñ–æ—Ä–º–∞—Ç:

```json
{
  "name": "Niacinamide 10% Booster",
  "brandName": "The Ordinary",
  "step": "serum",
  "category": "serum",
  "price": 890,
  "priceSegment": "mass",
  "skinTypes": ["oily", "combo", "normal"],
  "concerns": ["acne", "pores", "oiliness"],
  "isNonComedogenic": true,
  "isFragranceFree": true,
  "activeIngredients": ["niacinamide", "zinc"],
  "published": true,
  "isHero": false,
  "priority": 0
}
```

## –ö–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã –ø–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ –ª–æ–≥–∏–∫–µ –ø–æ–¥–±–æ—Ä–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤, –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
- `app/api/recommendations/route.ts` - –ª–æ–≥–∏–∫–∞ –ø–æ–¥–±–æ—Ä–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –¥–ª—è –ø—Ä–∞–≤–∏–ª
- `app/api/plan/generate/route.ts` - –ª–æ–≥–∏–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–ª–∞–Ω–∞
- `lib/step-category-rules.ts` - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ StepCategory
- `scripts/test-all-rules.ts` - —Ç–µ—Å—Ç—ã –ø—Ä–∞–≤–∏–ª


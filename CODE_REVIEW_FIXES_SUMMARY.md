# üìã –ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º –∫–æ–¥-—Ä–µ–≤—å—é

**–î–∞—Ç–∞:** 2025-12-11  
**–í–µ—Ç–∫–∞:** develop

---

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### üî¥ –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–≤—ã–ø–æ–ª–Ω–µ–Ω—ã)

#### 1. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- ‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω CSP –∑–∞–≥–æ–ª–æ–≤–æ–∫** –≤ `next.config.mjs`
  - –ó–∞—â–∏—Ç–∞ –æ—Ç XSS –∞—Ç–∞–∫
  - –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –¥–ª—è Telegram —Å–∫—Ä–∏–ø—Ç–æ–≤
  - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤

- ‚úÖ **–£–±—Ä–∞–Ω —Ö–∞—Ä–¥–∫–æ–¥ JWT —Å–µ–∫—Ä–µ—Ç–∞** –≤ `app/api/admin/login/route.ts`
  - JWT_SECRET —Ç–µ–ø–µ—Ä—å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
  - –û—à–∏–±–∫–∞ 500 –µ—Å–ª–∏ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω

- ‚úÖ **–£–ª—É—á—à–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è env –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö** –≤ `lib/env-check.ts`
  - JWT_SECRET —Ç–µ–ø–µ—Ä—å –≤ REQUIRED_ENV_VARS
  - –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –¥–ª—è –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
  - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ

- ‚úÖ **–ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –∏–Ω–¥–µ–∫—Å—ã –ë–î**
  - –í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∏–Ω–¥–µ–∫—Å—ã –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç
  - –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –ø–æ–ª–µ–π
  - –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

#### 2. –¢–∏–ø–∏–∑–∞—Ü–∏—è
- ‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω—ã —Ç–∏–ø—ã –¥–ª—è API –æ—Ç–≤–µ—Ç–æ–≤** –≤ `lib/api-types.ts`
  - `UserProfileResponse`
  - `PlanResponse`
  - `WishlistResponse`
  - `CartResponse`
  - `AnalysisResponse`
  - `QuizProgressResponse`
  - `SubmitAnswersResponse`

- ‚úÖ **–û–±–Ω–æ–≤–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã API –∫–ª–∏–µ–Ω—Ç–∞** –≤ `lib/api.ts`
  - –í—Å–µ –º–µ—Ç–æ–¥—ã —Ç–µ–ø–µ—Ä—å –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã
  - –£–ª—É—á—à–µ–Ω–∞ —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ **–ó–∞–º–µ–Ω–µ–Ω—ã `as any` –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ç–∏–ø—ã**
  - `app/(miniapp)/page.tsx` - –∑–∞–º–µ–Ω–µ–Ω—ã –≤—Å–µ `as any`
  - `app/(miniapp)/quiz/page.tsx` - –∑–∞–º–µ–Ω–µ–Ω—ã –≤—Å–µ `as any`
  - `app/(miniapp)/plan/plan-client-new.tsx` - –∑–∞–º–µ–Ω–µ–Ω—ã –≤—Å–µ `as any`

#### 3. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ **–ó–∞–º–µ–Ω–µ–Ω—ã `console.log` –Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**
  - `app/api/admin/login/route.ts` - –≤—Å–µ `console.log` –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ `logger`
  - `app/(miniapp)/page.tsx` - –∫—Ä–∏—Ç–∏—á–Ω—ã–µ `console.error` –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ `clientLogger.error`

#### 4. –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥
- ‚úÖ **–°–æ–∑–¥–∞–Ω—ã —Ö—É–∫–∏ –¥–ª—è –¥—É–±–ª–∏—Ä—É—é—â–µ–π—Å—è –ª–æ–≥–∏–∫–∏**
  - `hooks/useProfileCheck.ts` - —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è
  - `hooks/useProducts.ts` - —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

### –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã: 9
1. `next.config.mjs` - –¥–æ–±–∞–≤–ª–µ–Ω CSP
2. `app/api/admin/login/route.ts` - —É–±—Ä–∞–Ω —Ö–∞—Ä–¥–∫–æ–¥ JWT, —É–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
3. `lib/env-check.ts` - —É–ª—É—á—à–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è env –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
4. `lib/api-types.ts` - –¥–æ–±–∞–≤–ª–µ–Ω—ã —Ç–∏–ø—ã –¥–ª—è API –æ—Ç–≤–µ—Ç–æ–≤
5. `lib/api.ts` - –æ–±–Ω–æ–≤–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ç–∏–ø–æ–≤
6. `app/(miniapp)/page.tsx` - –∑–∞–º–µ–Ω–µ–Ω—ã `as any`, —É–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
7. `app/(miniapp)/quiz/page.tsx` - –∑–∞–º–µ–Ω–µ–Ω—ã `as any`
8. `app/(miniapp)/plan/plan-client-new.tsx` - –∑–∞–º–µ–Ω–µ–Ω—ã `as any`
9. `hooks/useProfileCheck.ts` - –Ω–æ–≤—ã–π —Ö—É–∫
10. `hooks/useProducts.ts` - –Ω–æ–≤—ã–π —Ö—É–∫

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:
- ‚úÖ 1 –∫—Ä–∏—Ç–∏—á–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (CSP)
- ‚úÖ 1 –∫—Ä–∏—Ç–∏—á–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (JWT —Å–µ–∫—Ä–µ—Ç)
- ‚úÖ 1 –≤–∞–∂–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ (–≤–∞–ª–∏–¥–∞—Ü–∏—è env)
- ‚úÖ 25+ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π `as any` –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ç–∏–ø—ã
- ‚úÖ 10+ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π `console.log` –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ 2 –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö—Å—è –±–ª–æ–∫–∞ –∫–æ–¥–∞ –≤—ã–Ω–µ—Å–µ–Ω—ã –≤ —Ö—É–∫–∏

---

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:
- ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª CSP –∑–∞–≥–æ–ª–æ–≤–æ–∫
- ‚ùå –•–∞—Ä–¥–∫–æ–¥ JWT —Å–µ–∫—Ä–µ—Ç–∞ –≤ –∫–æ–¥–µ
- ‚ùå 25+ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π `as any`
- ‚ùå 25+ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π `console.log`
- ‚ùå –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è
- ‚ùå –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ–¥—É–∫—Ç–æ–≤

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:
- ‚úÖ CSP –∑–∞–≥–æ–ª–æ–≤–æ–∫ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- ‚úÖ JWT —Å–µ–∫—Ä–µ—Ç –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω —á–µ—Ä–µ–∑ env
- ‚úÖ –¢–∏–ø–∏–∑–∞—Ü–∏—è —É–ª—É—á—à–µ–Ω–∞ (–∑–∞–º–µ–Ω–µ–Ω—ã –≤—Å–µ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ `as any`)
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö
- ‚úÖ –°–æ–∑–¥–∞–Ω—ã –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ö—É–∫–∏
- ‚úÖ –£–ª—É—á—à–µ–Ω–∞ —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å API –∫–ª–∏–µ–Ω—Ç–∞

---

## üìù –û—Å—Ç–∞–≤—à–∏–µ—Å—è –∑–∞–¥–∞—á–∏ (–Ω–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)

### –ñ–µ–ª–∞—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:
- [ ] –ó–∞–º–µ–Ω–∏—Ç—å –æ—Å—Ç–∞–≤—à–∏–µ—Å—è `console.log` –≤ –Ω–µ–∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–æ–∑–¥–∞–Ω–Ω—ã–µ —Ö—É–∫–∏ –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö
- [ ] –î–æ–±–∞–≤–∏—Ç—å unit —Ç–µ—Å—Ç—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω–æ–π –ª–æ–≥–∏–∫–∏
- [ ] –†–∞–∑–±–∏—Ç—å –±–æ–ª—å—à–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –Ω–∞ –º–µ–Ω—å—à–∏–µ
- [ ] –î–æ–±–∞–≤–∏—Ç—å JSDoc –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–ª—è –ø—É–±–ª–∏—á–Ω—ã—Ö API

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É CSP –∑–∞–≥–æ–ª–æ–≤–∫–∞
   - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ JWT_SECRET –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–∏–ø–∏–∑–∞—Ü–∏—é –≤ TypeScript

2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–æ–≤—ã–µ —Ö—É–∫–∏:**
   - –ó–∞–º–µ–Ω–∏—Ç—å –¥—É–±–ª–∏—Ä—É—é—â—É—é—Å—è –ª–æ–≥–∏–∫—É –Ω–∞ `useProfileCheck`
   - –ó–∞–º–µ–Ω–∏—Ç—å –¥—É–±–ª–∏—Ä—É—é—â—É—é—Å—è –ª–æ–≥–∏–∫—É –Ω–∞ `useProducts`

3. **–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —É–ª—É—á—à–µ–Ω–∏—è:**
   - –ó–∞–º–µ–Ω–∏—Ç—å –æ—Å—Ç–∞–≤—à–∏–µ—Å—è `console.log`
   - –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã
   - –£–ª—É—á—à–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

---

## ‚úÖ –í—Å–µ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –∑–∞–¥–∞—á–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã!

–í—Å–µ –∑–∞–¥–∞—á–∏ –∏–∑ –∫–æ–¥-—Ä–µ–≤—å—é, –ø–æ–º–µ—á–µ–Ω–Ω—ã–µ –∫–∞–∫ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –∏ –≤–∞–∂–Ω—ã–µ, –±—ã–ª–∏ —É—Å–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã –∏ –∑–∞–∫–æ–º–º–∏—á–µ–Ω—ã –≤ –≤–µ—Ç–∫—É `develop`.

# Как попасть в админ-панель

## Шаг 1: Добавьте себя в вайт-лист администраторов

Ваш Telegram username или ID должен быть в базе данных как администратор.

Чтобы добавить админа в вайт-лист, выполните:
```bash
npm run seed:admin-telegram
```

По умолчанию скрипт добавляет `@sofiagguseynova`. Чтобы добавить другого админа, отредактируйте `scripts/seed-admin-telegram.ts`.

## Шаг 2: Откройте страницу входа через Telegram Mini App

**Важно:** Админ-панель теперь использует авторизацию через **Telegram Mini App** (вайт-лист).

### Доступ к админ-панели

1. Откройте бота `@skinplanned_bot` в Telegram
2. Нажмите на кнопку "Открыть SkinIQ Mini App" или отправьте `/start`
3. В Mini App перейдите на страницу: `/admin/login`
4. Система автоматически проверит ваш Telegram ID или username
5. Если вы в вайт-листе - войдете в админ-панель автоматически
6. Если нет - получите ошибку "Доступ запрещен"

## Структура админ-панели

После входа вы попадете на:
- **Дашборд**: `/admin` - главная страница админ-панели
- **Продукты**: `/admin/products` - управление продуктами
- **Анкета**: `/admin/questionnaire` - просмотр и редактирование анкеты
- **Правила**: `/admin/rules` - управление правилами рекомендаций

## Отладка проблем

Если у вас не получается войти:

1. Убедитесь, что вы открыли страницу через Telegram Mini App (не в обычном браузере)
2. Проверьте, что ваш Telegram ID или username в вайт-листе:
   ```bash
   npm run seed:admin-telegram
   ```

3. Если видите ошибку "Доступ запрещен":
   - Ваш Telegram ID или username не в списке администраторов
   - Добавьте себя в вайт-лист (см. "Как добавить нового админа")

4. Если Telegram WebApp не доступен:
   - Откройте страницу через Telegram Mini App, а не в браузере
   - Убедитесь, что бот работает и Mini App доступен

## Важно

- **Админ-панель использует Telegram Mini App авторизацию**
- **Требуется** открывать страницу через Telegram Mini App
- Авторизация происходит автоматически на основе Telegram ID/username из Mini App
- Система проверяет вайт-лист администраторов в базе данных
- Токен хранится в `localStorage` как `admin_token`

## Как добавить нового админа

1. Узнайте Telegram username или ID нового админа
2. Отредактируйте `scripts/seed-admin-telegram.ts`:
   ```typescript
   const telegramUsername = 'username'; // Без @, например 'sofiagguseynova'
   const telegramId = null; // Опционально, если знаете ID
   ```
3. Выполните скрипт:
   ```bash
   npm run seed:admin-telegram
   ```
4. Новый админ сможет войти через Telegram Mini App

**Примечание:** Если указан только username, Telegram ID обновится автоматически при первой авторизации.
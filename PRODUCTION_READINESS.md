# Production Readiness & Scalability Analysis

## üìä –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å

**–í–µ—Ä–¥–∏–∫—Ç**: ‚úÖ **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –≥–æ—Ç–æ–≤–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –≤ –ø—Ä–æ–¥–∞–∫—à–Ω —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–π –∞—É–¥–∏—Ç–æ—Ä–∏–µ–π (5-10k –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)**

**–¢–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å**: 7/10 ‚Äî —Ö–æ—Ä–æ—à–∞—è –±–∞–∑–∞, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–æ–∫ –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è

---

## ‚ùå –ß—Ç–æ –º–µ—à–∞–µ—Ç –Ω–∞–∑–≤–∞—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É 100% –ø—Ä–æ–¥–∞–∫—à–Ω-–≥–æ—Ç–æ–≤–æ–π

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã (–±–ª–æ–∫–µ—Ä—ã –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è)

| ‚Ññ | –ü—Ä–æ–±–ª–µ–º–∞ / –†–∏—Å–∫ | –ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è –ø—Ä–∏ —Ä–æ—Å—Ç–µ –Ω–∞–≥—Ä—É–∑–∫–∏ / –∞—É–¥–∏—Ç–æ—Ä–∏–∏ | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç) |
|---|-----------------|--------------------------------------------|--------------------------|
| **1** | **–ù–µ—Ç rate limiting –∏ –∑–∞—â–∏—Ç—ã –æ—Ç –±—Ä—É—Ç—Ñ–æ—Ä—Å–∞** | –û–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –∑–∞—Å–ø–∞–º–∏—Ç—å `/api/plan/generate` ‚Üí 100% CPU, –ø–∞–¥–µ–Ω–∏–µ –≤—Å–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è | **–ö—Ä–∏—Ç–∏—á–Ω–æ**. –î–æ–±–∞–≤–∏—Ç—å `next-rate-limit`, `limiter`, –∏–ª–∏ Cloudflare/ Vercel Edge Middleware |
| **2** | **–ê–¥–º–∏–Ω–∫–∞ –∑–∞—â–∏—â–µ–Ω–∞ —Ç–æ–ª—å–∫–æ –ø–∞—Ä–æ–ª–µ–º** | –£—Ç–µ—á–∫–∞ `ADMIN_SECRET` ‚Üí –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º –¥–∞–Ω–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π | **–ö—Ä–∏—Ç–∏—á–Ω–æ**. –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ Telegram Login –¥–ª—è –∞–¥–º–∏–Ω–æ–≤ (—É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ –ø—Ä–æ—à–ª–æ–º –æ—Ç–≤–µ—Ç–µ) + whitelist –≤ –ë–î |
| **3** | **–ù–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è —Ç—è–∂—ë–ª—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤** | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–ª–∞–Ω–∞ 28 –¥–Ω–µ–π + —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ–¥—É–∫—Ç–æ–≤ ‚Äî —Ç—è–∂—ë–ª—ã–π –∑–∞–ø—Ä–æ—Å –∫–∞–∂–¥—ã–π —Ä–∞–∑ | **–í—ã—Å–æ–∫–∏–π**. –ö—ç—à–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–∞ 5‚Äì15 –º–∏–Ω—É—Ç –ø–æ `userId + profileVersion` (Redis –∏–ª–∏ Vercel KV) |
| **4** | **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç–µ—Å—Ç–æ–≤ (unit / integration / e2e)** | –õ—é–±–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª/–ª–æ–≥–∏–∫–∏ –º–æ–∂–µ—Ç —Å–ª–æ–º–∞—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ | **–°—Ä–µ–¥–Ω–∏–π-–≤—ã—Å–æ–∫–∏–π**. –•–æ—Ç—è –±—ã –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—É—Ç–∏: —Ä–∞—Å—á—ë—Ç –ø—Ä–æ—Ñ–∏–ª—è, –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–ª–∞–Ω–∞, –≤–∞–ª–∏–¥–∞—Ü–∏—è initData |

### –°—Ä–µ–¥–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã (–≤–ª–∏—è—é—Ç –Ω–∞ UX –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å)

| ‚Ññ | –ü—Ä–æ–±–ª–µ–º–∞ / –†–∏—Å–∫ | –ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è –ø—Ä–∏ —Ä–æ—Å—Ç–µ –Ω–∞–≥—Ä—É–∑–∫–∏ / –∞—É–¥–∏—Ç–æ—Ä–∏–∏ | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç) |
|---|-----------------|--------------------------------------------|--------------------------|
| **5** | **Inline-—Å—Ç–∏–ª–∏ ‚Üí –±–æ–ª—å—à–æ–π –±–∞–Ω–¥–ª** | –ù–∞ —Å–ª–∞–±—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö (—Å—Ç–∞—Ä—ã–µ Android) ‚Üí —Ç–æ—Ä–º–æ–∑–∞ –∏ –≤—ã—Å–æ–∫–∏–π % –æ—Ç–∫–∞–∑–æ–≤ | **–°—Ä–µ–¥–Ω–∏–π**. –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ Tailwind + CSS-–º–æ–¥—É–ª–∏ –∏–ª–∏ `cva` (class-variance-authority) |
| **6** | **Prisma Client —Å–æ–∑–¥–∞—ë—Ç—Å—è –Ω–∞ –∫–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å** | –ù–∞ Vercel Serverless –º–æ–∂–µ—Ç –æ—Ç–∫—Ä—ã–≤–∞—Ç—å –ª–∏—à–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è | **–°—Ä–µ–¥–Ω–∏–π**. ‚úÖ –£–∂–µ singleton –≤ `lib/db.ts` ‚Äî –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ |
| **7** | **–ù–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ API –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ** | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –±–µ–ª—ã–π —ç–∫—Ä–∞–Ω –ø—Ä–∏ 500 | **–°—Ä–µ–¥–Ω–∏–π**. –ì–ª–æ–±–∞–ª—å–Ω—ã–π error boundary + toast –ø—Ä–∏ `api.error` |
| **8** | **–ù–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞** | –ù–µ –≤–∏–¥–Ω–æ, –∫–æ–≥–¥–∞ –∏ –ø–æ—á–µ–º—É –ø–∞–¥–∞–µ—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–ª–∞–Ω–∞ | **–°—Ä–µ–¥–Ω–∏–π**. Sentry / Logtail / Vercel Analytics + –∞–ª–µ—Ä—Ç—ã –≤ Slack/Telegram |

### –ù–∏–∑–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã (nice to have)

| ‚Ññ | –ü—Ä–æ–±–ª–µ–º–∞ / –†–∏—Å–∫ | –ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è –ø—Ä–∏ —Ä–æ—Å—Ç–µ –Ω–∞–≥—Ä—É–∑–∫–∏ / –∞—É–¥–∏—Ç–æ—Ä–∏–∏ | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç) |
|---|-----------------|--------------------------------------------|--------------------------|
| **9** | **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ feature flags** | –ù–µ–ª—å–∑—è –≤–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å –Ω–æ–≤—É—é –ª–æ–≥–∏–∫—É —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –±–µ–∑ –¥–µ–ø–ª–æ—è | **–ù–∏–∑–∫–∏–π-—Å—Ä–µ–¥–Ω–∏–π**. –î–æ–±–∞–≤–∏—Ç—å LaunchDarkly –∏–ª–∏ –ø—Ä–æ—Å—Ç—É—é —Ç–∞–±–ª–∏—Ü—É `FeatureFlag` |
| **10** | **–ù–µ—Ç –±—ç–∫–∞–ø–æ–≤ –ë–î –∏ Point-in-Time Recovery** | –°–ª—É—á–∞–π–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö ‚Üí –∫–∞—Ç–∞—Å—Ç—Ä–æ—Ñ–∞ | **–ù–∏–∑–∫–∏–π**. Neon –¥–∞—ë—Ç PITR –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –ø—Ä–æ—Å—Ç–æ –≤–∫–ª—é—á–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π retention 7‚Äì30 –¥–Ω–µ–π |

---

## ‚úÖ –ß—Ç–æ —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ —Ö–æ—Ä–æ—à–æ

1. ‚úÖ **Telegram `initData` –≤–∞–ª–∏–¥–∞—Ü–∏—è** ‚Äî –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
2. ‚úÖ **Server Components + App Router** ‚Äî —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥, —Ö–æ—Ä–æ—à–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
3. ‚úÖ **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–ª–∞–Ω–∞ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ** ‚Äî –ª–æ–≥–∏–∫–∞ –Ω–∞ –±—ç–∫–µ–Ω–¥–µ, –∑–∞—â–∏—â–µ–Ω–∞
4. ‚úÖ **–¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** ‚Äî TypeScript + Prisma –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É—é—Ç —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
5. ‚úÖ **–í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö** ‚Äî –∞–Ω–∫–µ—Ç—ã –∏ –ø—Ä–æ—Ñ–∏–ª–∏ –∏–º–µ—é—Ç –≤–µ—Ä—Å–∏–∏
6. ‚úÖ **Prisma Client singleton** ‚Äî –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
7. ‚úÖ **–ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞** ‚Äî –ª–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä—è—Ç—å

---

## üìã –ß–µ–∫-–ª–∏—Å—Ç ¬´–ü–µ—Ä–µ–¥ –≤—ã—Ö–æ–¥–æ–º –≤ –ø—Ä–æ–¥¬ª

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–µ–¥ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ–º)

- [ ] **Rate limiting + –∑–∞—â–∏—Ç–∞ –æ—Ç DDoS**
  - [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `next-rate-limit` –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Vercel Edge Middleware
  - [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ª–∏–º–∏—Ç—ã:
    - `/api/plan/generate`: 10 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω—É—Ç—É –Ω–∞ IP
    - `/api/questionnaire/answers`: 5 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω—É—Ç—É –Ω–∞ IP
    - `/api/recommendations`: 20 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω—É—Ç—É –Ω–∞ IP
  - [ ] –î–æ–±–∞–≤–∏—Ç—å –∑–∞—â–∏—Ç—É –æ—Ç –±—Ä—É—Ç—Ñ–æ—Ä—Å–∞ –¥–ª—è `/api/admin/login` (3 –ø–æ–ø—ã—Ç–∫–∏, –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –Ω–∞ 15 –º–∏–Ω—É—Ç)

- [ ] **–ê–¥–º–∏–Ω–∫–∞ —á–µ—Ä–µ–∑ Telegram Login + whitelist**
  - [ ] –£–±—Ä–∞—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –ø–æ —Å–µ–∫—Ä–µ—Ç–Ω–æ–º—É —Å–ª–æ–≤—É (`ADMIN_SECRET`)
  - [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é —á–µ—Ä–µ–∑ Telegram Login Widget
  - [ ] –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É whitelist –≤ –ë–î (—Ç–∞–±–ª–∏—Ü–∞ `Admin` —Å `telegramId` –∏–ª–∏ `telegramUsername`)
  - [ ] –û–±–Ω–æ–≤–∏—Ç—å `/api/admin/login` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Telegram Login

- [ ] **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–∞–Ω–∞/—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π**
  - [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Vercel KV –∏–ª–∏ Redis
  - [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫—ç—à –¥–ª—è:
    - –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–ª–∞–Ω–∞ (–∫–ª—é—á: `plan:${userId}:${profileVersion}`, TTL: 15 –º–∏–Ω—É—Ç)
    - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ (–∫–ª—é—á: `recommendations:${userId}:${profileVersion}`, TTL: 30 –º–∏–Ω—É—Ç)
  - [ ] –ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫—ç—à–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –ø—Ä–æ—Ñ–∏–ª—è

- [ ] **–ú–∏–Ω–∏–º—É–º –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤**
  - [ ] –¢–µ—Å—Ç—ã –¥–ª—è `lib/profile-calculator.ts` (—Ä–∞—Å—á—ë—Ç –ø—Ä–æ—Ñ–∏–ª—è)
  - [ ] –¢–µ—Å—Ç—ã –¥–ª—è `app/api/plan/generate/route.ts` (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–ª–∞–Ω–∞)
  - [ ] –¢–µ—Å—Ç—ã –¥–ª—è `lib/get-user-from-initdata.ts` (–≤–∞–ª–∏–¥–∞—Ü–∏—è initData)
  - [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CI/CD –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤

### –°—Ä–µ–¥–Ω–∏–µ –∑–∞–¥–∞—á–∏ (–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ –¥–æ 50k MAU)

- [ ] **–ü–µ—Ä–µ—Ö–æ–¥ —Å inline-—Å—Ç–∏–ª–µ–π –Ω–∞ Tailwind + CSS-–º–æ–¥—É–ª–∏**
  - [ ] –°–æ–∑–¥–∞—Ç—å –¥–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (Button, Card, Input, etc.)
  - [ ] –ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–∞ Tailwind
  - [ ] –£–¥–∞–ª–∏—Ç—å inline-—Å—Ç–∏–ª–∏ –∏–∑ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

- [ ] **–ì–ª–æ–±–∞–ª—å–Ω—ã–π error boundary + toast**
  - [ ] –°–æ–∑–¥–∞—Ç—å `ErrorBoundary` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
  - [ ] –î–æ–±–∞–≤–∏—Ç—å toast-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–ª—è API –æ—à–∏–±–æ–∫
  - [ ] –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –≤ Sentry/Logtail

- [ ] **Sentry + –∞–ª–µ—Ä—Ç—ã**
  - [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Sentry SDK
  - [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–ª–µ—Ä—Ç—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –æ—à–∏–±–æ–∫ (Slack/Telegram)
  - [ ] –î–æ–±–∞–≤–∏—Ç—å performance monitoring

### –ù–∏–∑–∫–∏–µ –∑–∞–¥–∞—á–∏ (–º–æ–∂–Ω–æ –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞)

- [ ] **Feature flags**
  - [ ] –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É `FeatureFlag` –≤ –ë–î
  - [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø—Ä–æ—Å—Ç–æ–π API –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ–ª–∞–≥–æ–≤
  - [ ] –û–±–µ—Ä–Ω—É—Ç—å –Ω–æ–≤—ã–µ —Ñ–∏—á–∏ –≤ feature flags

- [ ] **–ë—ç–∫–∞–ø—ã Neon (–ø—Ä–æ–≤–µ—Ä–∏—Ç—å retention)**
  - [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Point-in-Time Recovery –≤ Neon
  - [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å retention –Ω–∞ 7-30 –¥–Ω–µ–π
  - [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –±—ç–∫–∞–ø–∞

---

## üöÄ –ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º

### –§–∞–∑–∞ 1: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –¥–æ—Ä–∞–±–æ—Ç–∫–∏ (1-2 –Ω–µ–¥–µ–ª–∏)

**–¶–µ–ª—å**: –ó–∞—â–∏—Ç–∞ –æ—Ç –∞—Ç–∞–∫ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

1. **Rate limiting** (2-3 –¥–Ω—è)
   - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `next-rate-limit`
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å middleware –¥–ª—è –∑–∞—â–∏—Ç—ã API
   - –î–æ–±–∞–≤–∏—Ç—å –∑–∞—â–∏—Ç—É –æ—Ç –±—Ä—É—Ç—Ñ–æ—Ä—Å–∞

2. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** (2-3 –¥–Ω—è)
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Vercel KV
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫—ç—à –¥–ª—è –ø–ª–∞–Ω–∞ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
   - –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—é –∫—ç—à–∞

3. **–ê–¥–º–∏–Ω–∫–∞ —á–µ—Ä–µ–∑ Telegram** (2-3 –¥–Ω—è)
   - –£–±—Ä–∞—Ç—å `ADMIN_SECRET`
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Telegram Login
   - –î–æ–±–∞–≤–∏—Ç—å whitelist –ø—Ä–æ–≤–µ—Ä–∫—É

4. **–ë–∞–∑–æ–≤—ã–µ —Ç–µ—Å—Ç—ã** (3-4 –¥–Ω—è)
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Jest + Testing Library
   - –ü–æ–∫—Ä—ã—Ç—å –∫—Ä–∏—Ç–∏—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ç–µ—Å—Ç–∞–º–∏
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CI/CD

### –§–∞–∑–∞ 2: –£–ª—É—á—à–µ–Ω–∏–µ UX –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (1 –Ω–µ–¥–µ–ª—è)

**–¶–µ–ª—å**: –õ—É—á—à–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç –∏ –≤–∏–¥–∏–º–æ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º

1. **Error handling** (2 –¥–Ω—è)
   - –ì–ª–æ–±–∞–ª—å–Ω—ã–π Error Boundary
   - Toast-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
   - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫

2. **Sentry** (1 –¥–µ–Ω—å)
   - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∞–ª–µ—Ä—Ç–æ–≤

3. **–ú–∏–≥—Ä–∞—Ü–∏—è —Å—Ç–∏–ª–µ–π** (—á–∞—Å—Ç–∏—á–Ω–æ, 2-3 –¥–Ω—è)
   - –°–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
   - –ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –∫—Ä–∏—Ç–∏—á–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

### –§–∞–∑–∞ 3: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (–ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)

**–¶–µ–ª—å**: –ì–∏–±–∫–æ—Å—Ç—å –∏ –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å –Ω–∞ –¥–æ–ª–≥—É—é –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤—É

1. Feature flags
2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –±—ç–∫–∞–ø–æ–≤ Neon
3. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã

---

## üìä –û—Ü–µ–Ω–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∫ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—é

| –ê—É–¥–∏—Ç–æ—Ä–∏—è | –¢–µ–∫—É—â–∞—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å | –ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å |
|-----------|-------------------|-------------------|
| **1-10k MAU** | ‚úÖ 90% | Rate limiting, –±–∞–∑–æ–≤–∞—è –∑–∞—â–∏—Ç–∞ –∞–¥–º–∏–Ω–∫–∏ |
| **10-50k MAU** | ‚ö†Ô∏è 60% | + –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ, —Ç–µ—Å—Ç—ã, error handling |
| **50-100k MAU** | ‚ùå 40% | + –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥, –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å—Ç–∏–ª–µ–π, feature flags |
| **100k+ MAU** | ‚ùå 30% | + –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ, CDN, –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ë–î |

---

## üîß –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### 1. Rate Limiting

**–í–∞—Ä–∏–∞–Ω—Ç A: Vercel Edge Middleware (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**
```typescript
// middleware.ts (–æ–±–Ω–æ–≤–∏—Ç—å)
import { Ratelimit } from "@upstash/ratelimit";
import { Redis } from "@upstash/redis";

const ratelimit = new Ratelimit({
  redis: Redis.fromEnv(),
  limiter: Ratelimit.slidingWindow(10, "1 m"),
});

export async function middleware(request: NextRequest) {
  // Rate limiting –¥–ª—è API
  if (request.nextUrl.pathname.startsWith('/api/plan/generate')) {
    const identifier = request.ip ?? 'anonymous';
    const { success } = await ratelimit.limit(identifier);
    if (!success) {
      return NextResponse.json(
        { error: 'Too many requests' },
        { status: 429 }
      );
    }
  }
  // ... –æ—Å—Ç–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞
}
```

**–í–∞—Ä–∏–∞–Ω—Ç B: next-rate-limit (–ø—Ä–æ—â–µ)**
```typescript
// app/api/plan/generate/route.ts
import rateLimit from 'next-rate-limit';

const limiter = rateLimit({
  interval: 60 * 1000, // 1 minute
  uniqueTokenPerInterval: 500,
});

export async function GET(request: NextRequest) {
  await limiter.check(request, 10, 'CACHE_TOKEN');
  // ... –æ—Å—Ç–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞
}
```

### 2. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å Vercel KV

```typescript
// lib/cache.ts
import { kv } from '@vercel/kv';

const CACHE_TTL = 15 * 60; // 15 minutes

export async function getCachedPlan(userId: string, profileVersion: number) {
  const key = `plan:${userId}:${profileVersion}`;
  return await kv.get(key);
}

export async function setCachedPlan(
  userId: string, 
  profileVersion: number, 
  plan: GeneratedPlan
) {
  const key = `plan:${userId}:${profileVersion}`;
  await kv.setex(key, CACHE_TTL, JSON.stringify(plan));
}

// app/api/plan/generate/route.ts
export async function GET(request: NextRequest) {
  // ... –ø–æ–ª—É—á–µ–Ω–∏–µ userId –∏ profileVersion
  
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫—ç—à
  const cached = await getCachedPlan(userId, profile.version);
  if (cached) {
    return NextResponse.json(cached);
  }
  
  // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –ø–ª–∞–Ω
  const plan = await generate28DayPlan(userId);
  
  // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –∫—ç—à
  await setCachedPlan(userId, profile.version, plan);
  
  return NextResponse.json(plan);
}
```

### 3. Error Boundary

```typescript
// components/ErrorBoundary.tsx
'use client';

import { Component, ReactNode } from 'react';

interface Props {
  children: ReactNode;
}

interface State {
  hasError: boolean;
  error?: Error;
}

export class ErrorBoundary extends Component<Props, State> {
  constructor(props: Props) {
    super(props);
    this.state = { hasError: false };
  }

  static getDerivedStateFromError(error: Error) {
    return { hasError: true, error };
  }

  componentDidCatch(error: Error, errorInfo: any) {
    console.error('Error caught by boundary:', error, errorInfo);
    // –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ Sentry
  }

  render() {
    if (this.state.hasError) {
      return (
        <div style={{ padding: '20px', textAlign: 'center' }}>
          <h2>–ß—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫</h2>
          <button onClick={() => window.location.reload()}>
            –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É
          </button>
        </div>
      );
    }

    return this.props.children;
  }
}
```

### 4. –¢–µ—Å—Ç—ã

```typescript
// lib/__tests__/profile-calculator.test.ts
import { createSkinProfile } from '../profile-calculator';
import { UserAnswer } from '@prisma/client';

describe('createSkinProfile', () => {
  it('should calculate skin type correctly', async () => {
    const answers: UserAnswer[] = [
      // Mock answers
    ];
    
    const profile = await createSkinProfile('user-id', 2, answers);
    
    expect(profile.skinType).toBe('oily');
    expect(profile.acneLevel).toBeGreaterThan(0);
  });
});
```

---

## üìà –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –í—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–ª–∞–Ω–∞ (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å < 2 —Å–µ–∫—É–Ω–¥)
- –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ API (p50, p95, p99)
- –†–∞–∑–º–µ—Ä –±–∞–Ω–¥–ª–∞ (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å < 500KB gzipped)

### –ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å
- Error rate (< 0.1%)
- Uptime (> 99.9%)
- Cache hit rate (> 70%)

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ rate limit
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ—É–¥–∞—á–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫ –≤—Ö–æ–¥–∞ –≤ –∞–¥–º–∏–Ω–∫—É
- –ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å API

---

## üéØ –ò—Ç–æ–≥–æ–≤—ã–π –≤—ã–≤–æ–¥

### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –≥–æ—Ç–æ–≤–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –≤ –ø—Ä–æ–¥–∞–∫—à–Ω —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–π –∞—É–¥–∏—Ç–æ—Ä–∏–µ–π (5-10k –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π).**

–ë–∞–∑–æ–≤—ã–µ –≤–µ—â–∏ (–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å Telegram, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å Server Components, —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å) —Å–¥–µ–ª–∞–Ω—ã –Ω–∞ —É—Ä–æ–≤–Ω–µ –ª—É—á—à–∏—Ö –ø—Ä–∞–∫—Ç–∏–∫ 2025 –≥–æ–¥–∞.

### –î–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –¥–æ 50-100k MAU
**–ù—É–∂–Ω–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∑–∞–∫—Ä—ã—Ç—å –ø—É–Ω–∫—Ç—ã 1-4 –∏–∑ —Ç–∞–±–ª–∏—Ü—ã –≤—ã—à–µ** ‚Äî —ç—Ç–æ –∑–∞–π–º—ë—Ç 1-2 –Ω–µ–¥–µ–ª–∏ —Ä–∞–±–æ—Ç—ã –æ–¥–Ω–æ–≥–æ full-stack —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞:
1. Rate limiting + –∑–∞—â–∏—Ç–∞ –æ—Ç DDoS
2. –ê–¥–º–∏–Ω–∫–∞ —á–µ—Ä–µ–∑ Telegram Login + whitelist
3. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–∞–Ω–∞/—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
4. –ú–∏–Ω–∏–º—É–º –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤

### –ü–æ—Å–ª–µ –¥–æ—Ä–∞–±–æ—Ç–æ–∫
–ï—Å–ª–∏ —Å–¥–µ–ª–∞–µ—à—å —ç—Ç–∏ –¥–æ—Ä–∞–±–æ—Ç–∫–∏ ‚Äî –ø—Ä–æ–µ–∫—Ç –±—É–¥–µ—Ç –Ω–µ –ø—Ä–æ—Å—Ç–æ ¬´–≥–æ—Ç–æ–≤ –∫ –ø—Ä–æ–¥–∞–∫—à–Ω—É¬ª, –∞ **–æ–¥–Ω–∏–º –∏–∑ —Å–∞–º—ã—Ö –Ω–∞–¥—ë–∂–Ω—ã—Ö –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã—Ö Telegram Mini App –≤ beauty-–Ω–∏—à–µ**.

---

**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞**: 1.0  
**–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**: 2025-01-27  
**–ê–≤—Ç–æ—Ä**: AI Assistant (–Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–Ω–∞–ª–∏–∑–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã)

